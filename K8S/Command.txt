#command to create image 
docker build -t dangraahmed/platformservice .
#command to run image 
docker run -p 8080:80 -d dangraahmed/platformservice
#command to push image to docker hub
docker push dangraahmed/platformservice

docker build -t dangraahmed/commandservice .
docker run -p 8080:80 -d dangraahmed/commandservice
docker push dangraahmed/commandservice

kubectl version
kubectl get deployments
kubectl get pods
kubectl get services
kubectl get namespace
kubectl get pods --namespace=ingress-nginx
kubectl get storageclass
kubectl get pvc
kubectl get ingress

kubectl apply -f platforms-depl.yaml
kubectl rollout restart deployment platforms-depl

kubectl apply -f .\platforms-np-srv.yaml

kubectl apply -f commands-depl.yaml
kubectl rollout restart deployment commands-depl

kubectl apply -f ingress-srv.yaml

kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.0.0/deploy/static/provider/cloud/deploy.yaml

kubectl apply -f local-pvc.yaml

kubectl create secret generic mssql --from-literal=SA_PASSWORD="pa55w0rd!"
kubectl apply -f mssql-plat-depl.yaml
kubectl apply -f rabbitmq-depl.yaml

dotnet ef migrations add initialmigration

kubectl delete deployment platforms-depl
kubectl delete deployment commands-depl
kubectl delete deployment mssql-depl
kubectl delete deployment rabbitmq-depl

kubectl delete service platformnpservice-srv
kubectl delete service commands-clusterip-srv
kubectl delete service mssql-clusterip-srv
kubectl delete service mssql-loadbalancer-srv
kubectl delete service platforms-clusterip-srv
kubectl delete service rabbitmq-clusterip-srv
kubectl delete service rabbitmq-loadbalancer
kubectl delete ingress ingress-srv
kubectl delete -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.0.0/deploy/static/provider/cloud/deploy.yaml


kubectl delete -f platforms-depl.yaml
kubectl delete -f platforms-np-srv.yaml
kubectl delete -f commands-depl.yaml
kubectl delete -f ingress-srv.yaml
kubectl delete -f local-pvc.yaml
kubectl delete -f mssql-plat-depl.yaml
kubectl delete -f rabbitmq-depl.yaml
